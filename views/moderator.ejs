<html lang="tr">

<head>
    <%- include("partials/head") %>
        <link rel="stylesheet" href="/css/moderator.css">
        <link rel="stylesheet" href="/css/messages.css">
</head>

<body>
    <%- include("partials/navbar") %>

        <!-- Başlık -->
        <div class="moderator-header">
            <div class="moderator-container">
                <h1>Hoş geldin, <%= user.name %>!</h1>
                <p>Moderatör Paneli</p>
            </div>
        </div>

        <div class="container">
            <!-- Mesaj Gönder -->
            <h2>Mesaj Gönder</h2>
            <form action="/messages" method="POST" class="message-form">
                <select name="receiverId" required>
                    <% students.forEach(student=> { %>
                        <option value="<%= student._id %>">
                            <%= student.name %> (<%= student.className %>)
                        </option>
                        <% }) %>
                </select>
                <textarea name="text" placeholder="Mesajınız..." required></textarea>
                <button type="submit">Gönder</button>
            </form>

            <!-- Giden Mesajlar -->
            <section class="messages-section">
                <h2>Giden Mesajlar</h2>
                <ul class="message-list">
                    <% messages.forEach(msg=> { %>
                        <li class="message-item">
                            <strong>
                                <%= msg.name %>: <%= msg.receiver.name %>
                            </strong>
                            <%= msg.text %>
                                <form action="/messages/<%= msg._id %>/delete" method="POST" class="delete-form">
                                    <button type="submit" class="delete-button"
                                        onclick="return confirm('Bu mesajı silmek istediğinize emin misiniz?')">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </form>
                        </li>
                        <% }) %>
                </ul>
            </section>
        </div>

        <!-- Yeni Gönderi -->
        <div class="container">
            <h1>Yeni Gönderi Oluştur</h1>
            <form class="upload-form" action="/moderator/add-image" method="POST" enctype="multipart/form-data">
                <label for="images">Resim Seç (En fazla 10):</label>
                <input type="file" id="images" name="images" accept="image/*" multiple required>

                <label for="text">Gönderi Metni:</label>
                <input type="text" id="text" name="text" placeholder="Gönderi metninizi girin" required>

                <button type="submit">Yükle</button>
            </form>
            <hr>
        </div>

        </main>
        <!-- JS -->
        <script src="/js/scripts.js"></script>

</body>

</html>